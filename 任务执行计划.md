# äº¤æ˜“æ‰˜ç®¡ç³»ç»Ÿä¼˜åŒ–ä»»åŠ¡æ‰§è¡Œè®¡åˆ’

> åŸºäºæŠ€æœ¯æ¶æ„åˆ†æï¼Œæœ¬æ–‡æ¡£æä¾›å¯æ‰§è¡Œçš„ä»»åŠ¡æ¸…å•å’Œæ—¶é—´è¡¨

## ğŸ“‹ å¿«é€Ÿæ¦‚è§ˆ

- **æ€»å·¥æœŸ**: 3-4 å‘¨
- **å›¢é˜Ÿè§„æ¨¡**: 3-4 äºº
- **ä¼˜å…ˆçº§**: P0ï¼ˆä¸¥é‡å®‰å…¨é—®é¢˜ï¼‰â†’ P1ï¼ˆæ¶æ„é—®é¢˜ï¼‰â†’ P2ï¼ˆä»£ç è´¨é‡ï¼‰â†’ P3ï¼ˆå·¥ç¨‹åŒ–ï¼‰

---

## ğŸ”´ ç¬¬ä¸€é˜¶æ®µï¼šå®‰å…¨åŠ å›ºï¼ˆ1-2å¤©ï¼‰**å¿…é¡»ç«‹å³æ‰§è¡Œ**

### ä»»åŠ¡ 1.1ï¼šå¯†ç åŠ å¯†æ”¹é€  â±ï¸ 4å°æ—¶ | P0
**è´Ÿè´£äºº**: åç«¯å¼€å‘

```bash
# 1. å®‰è£…ä¾èµ–
npm install bcrypt

# 2. åˆ›å»ºå·¥å…·ç±»
touch server/utils/passwordHelper.js

# 3. ä¿®æ”¹æ–‡ä»¶
# - server/controllers/userController.js
# - server/services/userService.js

# 4. æ•°æ®è¿ç§»
node server/migrations/encrypt_passwords.js
```

**æ£€æŸ¥æ¸…å•**:
- [ ] bcrypt å·²å®‰è£…
- [ ] PasswordHelper å·¥å…·ç±»å·²åˆ›å»º
- [ ] æ³¨å†ŒåŠŸèƒ½ä½¿ç”¨å¯†ç åŠ å¯†
- [ ] ç™»å½•åŠŸèƒ½ä½¿ç”¨å¯†ç éªŒè¯
- [ ] ä¿®æ”¹å¯†ç åŠŸèƒ½å·²æ›´æ–°
- [ ] ç°æœ‰ç”¨æˆ·å¯†ç å·²è¿ç§»
- [ ] æ‰€æœ‰è®¤è¯åŠŸèƒ½æµ‹è¯•é€šè¿‡

---

### ä»»åŠ¡ 1.2ï¼šJWT å®‰å…¨æ”¹é€  â±ï¸ 6å°æ—¶ | P0
**è´Ÿè´£äºº**: å…¨æ ˆå¼€å‘

```bash
# 1. å®‰è£…ä¾èµ–
npm install cookie-parser

# 2. ç”Ÿæˆå¯†é’¥
node scripts/generate-secrets.js

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥ç”Ÿæˆçš„å¯†é’¥

# 4. åˆ›å»ºå·¥å…·ç±»
touch server/utils/jwtHelper.js

# 5. ä¿®æ”¹æ–‡ä»¶
# åç«¯ï¼š
# - server/server.js (æ·»åŠ  cookie-parser)
# - server/controllers/userController.js (è¿”å› Cookie)
# - server/middleware/authMiddleware.js (è¯»å– Cookie)
# å‰ç«¯ï¼š
# - src/api/*.js (æ·»åŠ  credentials: 'include')
# - src/App.jsx (ç§»é™¤ localStorage)
```

**æ£€æŸ¥æ¸…å•**:
- [ ] cookie-parser å·²å®‰è£…
- [ ] JWT å¯†é’¥å·²é…ç½®åˆ°ç¯å¢ƒå˜é‡
- [ ] JwtHelper å·¥å…·ç±»å·²åˆ›å»º
- [ ] ç™»å½•æ¥å£è¿”å› HttpOnly Cookie
- [ ] Token åˆ·æ–°æ¥å£å·²åˆ›å»º
- [ ] è®¤è¯ä¸­é—´ä»¶ä» Cookie è¯»å– token
- [ ] å‰ç«¯ API è°ƒç”¨æºå¸¦ Cookie
- [ ] localStorage ç›¸å…³ä»£ç å·²ç§»é™¤
- [ ] è®¤è¯æµç¨‹æµ‹è¯•é€šè¿‡

---

### ä»»åŠ¡ 1.3ï¼šAPI æƒé™æ§åˆ¶ â±ï¸ 4å°æ—¶ | P0
**è´Ÿè´£äºº**: åç«¯å¼€å‘

```bash
# ä¿®æ”¹æ–‡ä»¶
# - server/middleware/authMiddleware.js (å¢å¼ºè®¤è¯å’Œæƒé™éªŒè¯)
# - server/server.js (ä¸ºè·¯ç”±æ·»åŠ ä¸­é—´ä»¶)
```

**æ£€æŸ¥æ¸…å•**:
- [ ] authenticate ä¸­é—´ä»¶å·²å¢å¼º
- [ ] authorize ä¸­é—´ä»¶å·²åˆ›å»º
- [ ] checkResourceOwnership ä¸­é—´ä»¶å·²åˆ›å»º
- [ ] /api/users éœ€è¦ admin æƒé™
- [ ] /api/users/:id éœ€è¦ admin æƒé™
- [ ] /api/funds/:userId éœ€è¦è®¤è¯å’Œèµ„æºæ‰€æœ‰æƒéªŒè¯
- [ ] /api/positions/:userId éœ€è¦è®¤è¯å’Œèµ„æºæ‰€æœ‰æƒéªŒè¯
- [ ] æƒé™æµ‹è¯•é€šè¿‡

---

### ä»»åŠ¡ 1.4ï¼šä¾èµ–å®‰å…¨ä¿®å¤ â±ï¸ 2å°æ—¶ | P0
**è´Ÿè´£äºº**: DevOps

```bash
# 1. æŸ¥çœ‹æ¼æ´
npm audit

# 2. è‡ªåŠ¨ä¿®å¤
npm audit fix

# 3. æ‰‹åŠ¨ä¿®å¤æ— æ³•è‡ªåŠ¨ä¿®å¤çš„
npm audit fix --force

# 4. æ›´æ–° package-lock.json
npm install

# 5. æµ‹è¯•åº”ç”¨
npm run dev
```

**æ£€æŸ¥æ¸…å•**:
- [ ] npm audit æ˜¾ç¤º 0 ä¸ªé«˜å±æ¼æ´
- [ ] åº”ç”¨åŠŸèƒ½æ­£å¸¸
- [ ] package-lock.json å·²æ›´æ–°

---

### âœ… ç¬¬ä¸€é˜¶æ®µéªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰å¯†ç å·²åŠ å¯†å­˜å‚¨ï¼ˆbcryptï¼‰
- [ ] JWT token å­˜å‚¨åœ¨ HttpOnly Cookie
- [ ] æ‰€æœ‰æ•æ„Ÿæ¥å£æœ‰è®¤è¯å’Œæƒé™æ§åˆ¶
- [ ] ä¾èµ–åŒ…æ— é«˜å±å®‰å…¨æ¼æ´
- [ ] é€šè¿‡å®‰å…¨æµ‹è¯•

---

## ğŸŸ¡ ç¬¬ä¸€é˜¶æ®µè¡¥å……ï¼šå‰ç«¯å®‰å…¨æ”¹é€ ï¼ˆä¸åç«¯å¹¶è¡Œï¼Œ1å¤©ï¼‰

### ä»»åŠ¡ 1.5ï¼šå‰ç«¯ Token å­˜å‚¨æ”¹é€  â±ï¸ 4å°æ—¶ | P0
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘

```bash
# 1. åˆ›å»ºç»Ÿä¸€çš„ API å®¢æˆ·ç«¯
touch src/api/apiClient.js

# 2. ä¿®æ”¹æ–‡ä»¶
# - src/App.jsx (ç§»é™¤ localStorage æ“ä½œ)
# - src/components/Login.jsx (ä¿®æ”¹ç™»å½•é€»è¾‘)
# - src/api/*.js (æ·»åŠ  credentials: 'include')
# - src/components/UserFundPosition.jsx (ç§»é™¤ localStorage è¯»å–)
```

**æ£€æŸ¥æ¸…å•**:
- [ ] ApiClient ç±»å·²åˆ›å»º
- [ ] æ‰€æœ‰ API è¯·æ±‚æ·»åŠ  credentials: 'include'
- [ ] App.jsx ä¸­ç§»é™¤æ‰€æœ‰ localStorage æ“ä½œ
- [ ] Login.jsx ä¸å†å­˜å‚¨ token åˆ° localStorage
- [ ] UserFundPosition.jsx ä»åç«¯è·å– userId
- [ ] å‰ç«¯æ— æ³•é€šè¿‡ JS è®¿é—® token
- [ ] ä¸åç«¯ JWT Cookie æ”¹é€ è”è°ƒé€šè¿‡

---

### ä»»åŠ¡ 1.6ï¼šå‰ç«¯ç»Ÿä¸€é”™è¯¯å¤„ç† â±ï¸ 3å°æ—¶ | P0
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘

```bash
# 1. åˆ›å»ºé”™è¯¯å¤„ç†å·¥å…·
touch src/utils/errorHandler.js

# 2. åœ¨ ApiClient ä¸­é›†æˆé”™è¯¯å¤„ç†

# 3. ä¿®æ”¹æ‰€æœ‰ç»„ä»¶çš„é”™è¯¯å¤„ç†
# - æ›¿æ¢ alert ä¸º Toast
# - ä½¿ç”¨ç»Ÿä¸€çš„ handleError å‡½æ•°
```

**æ£€æŸ¥æ¸…å•**:
- [ ] ApiError ç±»å·²åˆ›å»º
- [ ] ERROR_MESSAGES å¸¸é‡å·²å®šä¹‰
- [ ] handleError å‡½æ•°å·²å®ç°
- [ ] ApiClient é›†æˆé”™è¯¯å¤„ç†
- [ ] æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ç»Ÿä¸€é”™è¯¯å¤„ç†
- [ ] 401 é”™è¯¯è‡ªåŠ¨è·³è½¬ç™»å½•é¡µ
- [ ] é”™è¯¯æç¤ºä½¿ç”¨ Toast

---

### âœ… ç¬¬ä¸€é˜¶æ®µéªŒæ”¶æ ‡å‡†ï¼ˆæ›´æ–°ï¼‰
- [ ] æ‰€æœ‰å¯†ç å·²åŠ å¯†å­˜å‚¨ï¼ˆbcryptï¼‰
- [ ] JWT token å­˜å‚¨åœ¨ HttpOnly Cookieï¼ˆå‰åç«¯ï¼‰
- [ ] æ‰€æœ‰æ•æ„Ÿæ¥å£æœ‰è®¤è¯å’Œæƒé™æ§åˆ¶
- [ ] ä¾èµ–åŒ…æ— é«˜å±å®‰å…¨æ¼æ´
- [ ] å‰ç«¯æ—  localStorage å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- [ ] å‰ç«¯ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶
- [ ] é€šè¿‡å®‰å…¨æµ‹è¯•

---

## ğŸŸ  ç¬¬äºŒé˜¶æ®µï¼šæ¶æ„é‡æ„ï¼ˆ1å‘¨ï¼‰

### ä»»åŠ¡ 2.0ï¼šå‰ç«¯æ¶æ„é‡æ„ï¼ˆä¸åç«¯å¹¶è¡Œï¼Œ3å¤©ï¼‰

#### ä»»åŠ¡ 2.0.1ï¼šåˆ›å»º AuthContext â±ï¸ 4å°æ—¶ | P1
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘

```bash
# 1. åˆ›å»º AuthContext
mkdir -p src/contexts
touch src/contexts/AuthContext.jsx

# 2. åœ¨ App.jsx ä¸­é›†æˆ AuthProvider

# 3. ä¿®æ”¹æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ useAuth
# - Login.jsx
# - AdminDashboard.jsx
# - UserFundPosition.jsx
# - å…¶ä»–éœ€è¦è®¤è¯çš„ç»„ä»¶
```

**æ£€æŸ¥æ¸…å•**:
- [ ] AuthContext å·²åˆ›å»º
- [ ] AuthProvider å·²å®ç°
- [ ] useAuth hook å·²å¯¼å‡º
- [ ] App.jsx é›†æˆ AuthProvider
- [ ] App.jsx ä¸­åˆ†æ•£çš„è®¤è¯çŠ¶æ€å·²ç§»é™¤
- [ ] Login ç»„ä»¶ä½¿ç”¨ useAuth
- [ ] æ‰€æœ‰ç»„ä»¶é€šè¿‡ useAuth è·å–ç”¨æˆ·ä¿¡æ¯
- [ ] è®¤è¯çŠ¶æ€ç»Ÿä¸€ç®¡ç†

---

#### ä»»åŠ¡ 2.0.2ï¼šè·¯ç”±é…ç½®ä¼˜åŒ– â±ï¸ 3å°æ—¶ | P1
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘

```bash
# 1. åˆ›å»ºè·¯ç”±é…ç½®
mkdir -p src/routes
touch src/routes/index.jsx

# 2. é‡æ„ ProtectedRoute ç»„ä»¶

# 3. ä½¿ç”¨è·¯ç”±é…ç½®
```

**æ£€æŸ¥æ¸…å•**:
- [ ] è·¯ç”±é…ç½®æ–‡ä»¶å·²åˆ›å»º
- [ ] è·¯ç”±å…ƒæ•°æ®ï¼ˆmetaï¼‰å·²å®šä¹‰
- [ ] ProtectedRoute ä½¿ç”¨ useAuth
- [ ] ProtectedRoute ä¸å†è¯»å– localStorage
- [ ] æƒé™åˆ¤æ–­é€»è¾‘ç»Ÿä¸€
- [ ] è·¯ç”±é…ç½®æ˜“äºç»´æŠ¤
- [ ] æ‰€æœ‰è·¯ç”±æ­£å¸¸å·¥ä½œ

---

#### ä»»åŠ¡ 2.0.3ï¼šAPI é…ç½®ç»Ÿä¸€ç®¡ç† â±ï¸ 2å°æ—¶ | P1
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘

```bash
# 1. åˆ›å»ºé…ç½®æ–‡ä»¶
mkdir -p src/config
touch src/config/api.js

# 2. é‡æ„æ‰€æœ‰ API æ–‡ä»¶
# - src/api/userApi.js
# - src/api/fundApi.js
# - src/api/positionApi.js

# 3. ç§»é™¤ç»„ä»¶ä¸­çš„ç›´æ¥ fetch è°ƒç”¨
```

**æ£€æŸ¥æ¸…å•**:
- [ ] API_CONFIG å·²åˆ›å»º
- [ ] ApiClient ä½¿ç”¨ç»Ÿä¸€é…ç½®
- [ ] æ‰€æœ‰ API æ–‡ä»¶é‡æ„ä¸ºä½¿ç”¨ apiClient
- [ ] ç§»é™¤é‡å¤çš„ API_BASE_URL å®šä¹‰
- [ ] æ”¯æŒç¯å¢ƒå˜é‡é…ç½®
- [ ] æ‰€æœ‰ API è°ƒç”¨æ­£å¸¸

---

#### ä»»åŠ¡ 2.0.4ï¼šç»„ä»¶æ ·å¼é‡æ„ â±ï¸ 6å°æ—¶ | P2
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘

```bash
# 1. åˆ›å»º CSS å˜é‡
mkdir -p src/styles
touch src/styles/variables.css

# 2. é‡æ„ç»„ä»¶æ ·å¼
# - UserFundPosition.jsx/css
# - AdminDashboard.jsx/css
# - Login.jsx/css
# - å…¶ä»–ç»„ä»¶

# 3. ç§»é™¤æ‰€æœ‰å†…è”æ ·å¼
```

**æ£€æŸ¥æ¸…å•**:
- [ ] CSS å˜é‡æ–‡ä»¶å·²åˆ›å»º
- [ ] å®šä¹‰äº†é¢œè‰²ã€é—´è·ã€å­—ä½“ã€åœ†è§’ç­‰å˜é‡
- [ ] UserFundPosition å†…è”æ ·å¼å·²ç§»é™¤
- [ ] AdminDashboard å†…è”æ ·å¼å·²ç§»é™¤
- [ ] æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ CSS ç±»
- [ ] æ ·å¼ç»Ÿä¸€ä¸”å¯ç»´æŠ¤
- [ ] UI æ˜¾ç¤ºæ­£å¸¸

---

#### ä»»åŠ¡ 2.0.5ï¼šå¸¸é‡ç®¡ç† â±ï¸ 2å°æ—¶ | P2
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘

```bash
# 1. åˆ›å»ºå¸¸é‡æ–‡ä»¶
mkdir -p src/constants
touch src/constants/index.js

# 2. å®šä¹‰å¸¸é‡
# - ROLES
# - KEYS
# - LIMITS
# - ROUTES

# 3. æ›¿æ¢æ‰€æœ‰ç¡¬ç¼–ç 
```

**æ£€æŸ¥æ¸…å•**:
- [ ] å¸¸é‡æ–‡ä»¶å·²åˆ›å»º
- [ ] ROLES å¸¸é‡å·²å®šä¹‰
- [ ] KEYS å¸¸é‡å·²å®šä¹‰
- [ ] LIMITS å¸¸é‡å·²å®šä¹‰
- [ ] ROUTES å¸¸é‡å·²å®šä¹‰
- [ ] æ‰€æœ‰é­”æ³•æ•°å­—å·²æ›¿æ¢
- [ ] æ‰€æœ‰ç¡¬ç¼–ç å­—ç¬¦ä¸²å·²æ›¿æ¢
- [ ] ä½¿ç”¨ === è€Œé ==
- [ ] ä»£ç å¯è¯»æ€§æå‡

---

#### ä»»åŠ¡ 2.0.6ï¼šReact Hooks ä¼˜åŒ– â±ï¸ 3å°æ—¶ | P2
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘

```bash
# ä¿®æ”¹æ–‡ä»¶
# - src/App.jsx (ä¿®å¤ useEffect ä¾èµ–é¡¹)
# - src/components/UserFundPosition.jsx (æ·»åŠ è¯·æ±‚å–æ¶ˆ)
# - src/hooks/useUser.js (ä¼˜åŒ–è‡ªåŠ¨è·å–é€»è¾‘)
```

**æ£€æŸ¥æ¸…å•**:
- [ ] App.jsx useEffect ä¾èµ–é¡¹å·²ä¿®å¤
- [ ] UserFundPosition æ·»åŠ  AbortController
- [ ] API è¯·æ±‚æ”¯æŒå–æ¶ˆ
- [ ] useUser hook ä¸å†è‡ªåŠ¨è·å–æ•°æ®
- [ ] ç»„ä»¶å¸è½½æ—¶æ¸…ç†å‰¯ä½œç”¨
- [ ] æ—  ESLint è­¦å‘Š
- [ ] æ— å†…å­˜æ³„æ¼

---

### âœ… ç¬¬äºŒé˜¶æ®µå‰ç«¯éªŒæ”¶æ ‡å‡†
- [ ] AuthContext ç»Ÿä¸€ç®¡ç†è®¤è¯çŠ¶æ€
- [ ] è·¯ç”±é…ç½®åŒ–ï¼Œæƒé™åˆ¤æ–­ç»Ÿä¸€
- [ ] API é…ç½®ç»Ÿä¸€ç®¡ç†
- [ ] æ‰€æœ‰å†…è”æ ·å¼å·²ç§»é™¤
- [ ] å¸¸é‡ç®¡ç†è§„èŒƒ
- [ ] React Hooks ä½¿ç”¨æ­£ç¡®
- [ ] å‰ç«¯æ¶æ„æ¸…æ™°å¯ç»´æŠ¤

---

## ğŸŸ  ç¬¬äºŒé˜¶æ®µï¼šåç«¯æ¶æ„é‡æ„ï¼ˆ1å‘¨ï¼‰

### ä»»åŠ¡ 2.1ï¼šæ•°æ®åº“å·¥å…·å°è£… â±ï¸ 4å°æ—¶ | P1
**è´Ÿè´£äºº**: åç«¯å¼€å‘

```bash
# 1. åˆ›å»ºæ•°æ®åº“å·¥å…·ç±»
touch server/utils/database.js

# 2. å®ç° Promise å°è£…å’Œäº‹åŠ¡æ”¯æŒ
# å‚è€ƒæŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ä¸­çš„ä»£ç ç¤ºä¾‹
```

**æ£€æŸ¥æ¸…å•**:
- [ ] Database ç±»å·²åˆ›å»º
- [ ] run/get/all æ–¹æ³•å·² Promise åŒ–
- [ ] transaction æ–¹æ³•å·²å®ç°
- [ ] æ•°æ®åº“å·¥å…·æµ‹è¯•é€šè¿‡

---

### ä»»åŠ¡ 2.2ï¼šDAO å±‚åˆ›å»º â±ï¸ 8å°æ—¶ | P1
**è´Ÿè´£äºº**: åç«¯å¼€å‘

```bash
# 1. åˆ›å»º DAO ç›®å½•å’Œæ–‡ä»¶
mkdir server/dao
touch server/dao/userDao.js
touch server/dao/fundDao.js
touch server/dao/positionDao.js
touch server/dao/priceDao.js

# 2. å®ç°å„ä¸ª DAO
# å‚è€ƒæŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ä¸­çš„ä»£ç ç¤ºä¾‹

# 3. ç¼–å†™å•å…ƒæµ‹è¯•
mkdir server/tests/unit/dao
touch server/tests/unit/dao/userDao.test.js
```

**æ£€æŸ¥æ¸…å•**:
- [ ] UserDao å·²åˆ›å»ºå¹¶å®ç°æ‰€æœ‰æ–¹æ³•
- [ ] FundDao å·²åˆ›å»ºå¹¶å®ç°æ‰€æœ‰æ–¹æ³•
- [ ] PositionDao å·²åˆ›å»ºå¹¶å®ç°æ‰€æœ‰æ–¹æ³•
- [ ] PriceDao å·²åˆ›å»ºå¹¶å®ç°æ‰€æœ‰æ–¹æ³•
- [ ] DAO å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%

---

### ä»»åŠ¡ 2.3ï¼šService å±‚é‡æ„ â±ï¸ 12å°æ—¶ | P1
**è´Ÿè´£äºº**: åç«¯å¼€å‘

```bash
# 1. åˆ›å»ºæ–°çš„ Service æ–‡ä»¶
touch server/services/authService.js
touch server/services/priceService.js

# 2. é‡æ„ç°æœ‰ Service
# - server/services/userService.js
# - server/services/fundService.js
# - server/services/positionService.js

# 3. ä» server.js è¿ç§»ä¸šåŠ¡é€»è¾‘
# - getLatestPrice â†’ priceService.js
# - getDbLatestPrice â†’ priceService.js

# 4. ç¼–å†™å•å…ƒæµ‹è¯•
mkdir server/tests/unit/services
touch server/tests/unit/services/authService.test.js
```

**æ£€æŸ¥æ¸…å•**:
- [ ] AuthService å·²åˆ›å»º
- [ ] UserService å·²é‡æ„ï¼Œä½¿ç”¨ DAO
- [ ] FundService å·²é‡æ„ï¼Œä½¿ç”¨ DAO
- [ ] PositionService å·²é‡æ„ï¼Œä½¿ç”¨ DAO
- [ ] PriceService å·²åˆ›å»ºï¼Œä» server.js è¿ç§»
- [ ] æ‰€æœ‰ Service ä½¿ç”¨ async/await
- [ ] Service å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%

---

### ä»»åŠ¡ 2.4ï¼šController å±‚ç®€åŒ– â±ï¸ 8å°æ—¶ | P1
**è´Ÿè´£äºº**: åç«¯å¼€å‘

```bash
# 1. åˆ›å»ºæ–°çš„ Controller
touch server/controllers/authController.js

# 2. ç®€åŒ–ç°æœ‰ Controller
# - server/controllers/userController.js
# - server/controllers/fundController.js
# - server/controllers/positionController.js

# 3. ç¼–å†™é›†æˆæµ‹è¯•
mkdir server/tests/integration
touch server/tests/integration/auth.test.js
```

**æ£€æŸ¥æ¸…å•**:
- [ ] AuthController å·²åˆ›å»º
- [ ] UserController å·²ç®€åŒ–ï¼Œåªå¤„ç† HTTP
- [ ] FundController å·²ç®€åŒ–ï¼Œåªå¤„ç† HTTP
- [ ] PositionController å·²ç®€åŒ–ï¼Œåªå¤„ç† HTTP
- [ ] Controller é›†æˆæµ‹è¯•é€šè¿‡

---

### ä»»åŠ¡ 2.5ï¼šserver.js é‡æ„ â±ï¸ 4å°æ—¶ | P1
**è´Ÿè´£äºº**: åç«¯å¼€å‘

```bash
# 1. åˆ›å»ºé…ç½®æ–‡ä»¶
mkdir server/config
touch server/config/routes.js
touch server/config/database.js
touch server/config/env.js

# 2. é‡æ„ server.js
# - ç§»é™¤æ•°æ®åº“åˆå§‹åŒ–ä»£ç  â†’ database.js
# - ç§»é™¤è·¯ç”±å®šä¹‰ â†’ routes.js
# - ç§»é™¤ä¸šåŠ¡é€»è¾‘å‡½æ•° â†’ å·²è¿ç§»åˆ° Service
# - ä¿ç•™åº”ç”¨å¯åŠ¨é€»è¾‘

# 3. æµ‹è¯•åº”ç”¨å¯åŠ¨
npm run dev
```

**æ£€æŸ¥æ¸…å•**:
- [ ] config/routes.js å·²åˆ›å»º
- [ ] config/database.js å·²åˆ›å»º
- [ ] config/env.js å·²åˆ›å»º
- [ ] server.js å·²ç®€åŒ–ï¼ˆ< 50 è¡Œï¼‰
- [ ] åº”ç”¨å¯åŠ¨æ­£å¸¸
- [ ] æ‰€æœ‰è·¯ç”±æ­£å¸¸å·¥ä½œ

---

### ä»»åŠ¡ 2.6ï¼šæ•°æ®åº“ä¼˜åŒ– â±ï¸ 6å°æ—¶ | P1
**è´Ÿè´£äºº**: åç«¯å¼€å‘

```bash
# 1. åˆ›å»ºè¿ç§»å·¥å…·
mkdir server/migrations
touch server/migrations/migrator.js

# 2. åˆ›å»ºè¿ç§»è„šæœ¬
touch server/migrations/001_create_tables.sql
touch server/migrations/002_add_indexes.sql
touch server/migrations/003_optimize_schema.sql

# 3. æ‰§è¡Œè¿ç§»
node server/migrations/migrator.js

# 4. æ€§èƒ½æµ‹è¯•
npm run test:performance
```

**æ£€æŸ¥æ¸…å•**:
- [ ] è¿ç§»å·¥å…·å·²åˆ›å»º
- [ ] ç´¢å¼•è¿ç§»è„šæœ¬å·²åˆ›å»º
- [ ] è¡¨ç»“æ„ä¼˜åŒ–è„šæœ¬å·²åˆ›å»º
- [ ] è¿ç§»å·²æ‰§è¡ŒæˆåŠŸ
- [ ] æŸ¥è¯¢æ€§èƒ½æå‡ > 50%
- [ ] æ•°æ®å®Œæ•´æ€§éªŒè¯é€šè¿‡

---

### âœ… ç¬¬äºŒé˜¶æ®µéªŒæ”¶æ ‡å‡†
- [x] ä¸‰å±‚æ¶æ„æ¸…æ™°åˆ†ç¦»ï¼ˆController-Service-DAOï¼‰
- [x] æ‰€æœ‰æ•°æ®åº“æ“ä½œä½¿ç”¨ async/await
- [x] server.js ç®€åŒ–åˆ° < 50 è¡Œ
- [x] ä»£ç å¯ç»´æŠ¤æ€§æ˜¾è‘—æå‡
- [x] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [x] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 60%

---

## ğŸŸ¢ ç¬¬ä¸‰é˜¶æ®µï¼šä»£ç è´¨é‡æå‡ï¼ˆ3-4å¤©ï¼‰

### ä»»åŠ¡ 3.0ï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ– â±ï¸ 4å°æ—¶ | P3
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘

```bash
# 1. å®ç°ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
# ä¿®æ”¹ src/App.jsx

# 2. æ·»åŠ  React æ€§èƒ½ä¼˜åŒ–
# - ä½¿ç”¨ React.memo
# - ä½¿ç”¨ useCallback
# - ä½¿ç”¨ useMemoï¼ˆä»…åœ¨å¿…è¦æ—¶ï¼‰
```

**æ£€æŸ¥æ¸…å•**:
- [ ] æ‰€æœ‰é¡µé¢ç»„ä»¶ä½¿ç”¨ React.lazy
- [ ] Suspense åŒ…è£¹è·¯ç”±
- [ ] LoadingFallback ç»„ä»¶å·²åˆ›å»º
- [ ] çº¯å±•ç¤ºç»„ä»¶ä½¿ç”¨ React.memo
- [ ] äº‹ä»¶å¤„ç†å‡½æ•°ä½¿ç”¨ useCallback
- [ ] å¤æ‚è®¡ç®—ä½¿ç”¨ useMemoï¼ˆæ•°æ®é‡å¤§æ—¶ï¼‰
- [ ] é¦–å±åŠ è½½æ—¶é—´å‡å°‘ 30% ä»¥ä¸Š
- [ ] åˆå§‹åŒ…ä½“ç§¯å‡å°‘
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡

---
## ğŸŸ¢ ç¬¬å››é˜¶æ®µï¼šå·¥ç¨‹åŒ–å®Œå–„ï¼ˆ3-4å¤©ï¼‰

### ä»»åŠ¡ 4.1ï¼šä»£ç è§„èŒƒé…ç½® â±ï¸ 4å°æ—¶ | P3
**è´Ÿè´£äºº**: æŠ€æœ¯è´Ÿè´£äºº

```bash
# 1. å®‰è£…ä¾èµ–
npm install --save-dev eslint prettier eslint-config-prettier eslint-plugin-react eslint-plugin-react-hooks husky lint-staged

# 2. åˆ›å»ºé…ç½®æ–‡ä»¶
touch .eslintrc.js
touch .prettierrc
touch .editorconfig

# 3. é…ç½® Git Hooks
npx husky install
npx husky add .husky/pre-commit "npx lint-staged"

# 4. ä¿®å¤ç°æœ‰ä»£ç 
npm run lint:fix
npm run format

# 5. æ›´æ–° package.json
# æ·»åŠ  lint-staged é…ç½®
```

**æ£€æŸ¥æ¸…å•**:
- [ ] ESLint å·²å®‰è£…å’Œé…ç½®
- [ ] Prettier å·²å®‰è£…å’Œé…ç½®
- [ ] EditorConfig å·²é…ç½®
- [ ] Git Hooks å·²é…ç½®
- [ ] ç°æœ‰ä»£ç å·²ä¿®å¤
- [ ] æäº¤æ—¶è‡ªåŠ¨æ£€æŸ¥ç”Ÿæ•ˆ

---

### ä»»åŠ¡ 4.2ï¼šæµ‹è¯•ä½“ç³»å»ºè®¾ â±ï¸ 16å°æ—¶ | P3
**è´Ÿè´£äºº**: å…¨æ ˆå¼€å‘ + QA

```bash
# 1. ç¼–å†™åç«¯å•å…ƒæµ‹è¯•
# - server/tests/unit/services/*.test.js
# - server/tests/unit/dao/*.test.js
# - server/tests/unit/utils/*.test.js

# 2. ç¼–å†™å‰ç«¯å•å…ƒæµ‹è¯•
# - src/hooks/*.test.js
# - src/utils/*.test.js

# 3. ç¼–å†™é›†æˆæµ‹è¯•
# - server/tests/integration/*.test.js

# 4. ç¼–å†™ E2E æµ‹è¯•
# - tests/cypress/e2e/*.cy.js

# 5. é…ç½®è¦†ç›–ç‡æ£€æŸ¥
# ä¿®æ”¹ jest.config.js

# 6. è¿è¡Œæµ‹è¯•
npm run test:coverage
npm run test:e2e
```

**æ£€æŸ¥æ¸…å•**:
- [ ] åç«¯å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] å‰ç«¯å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] é›†æˆæµ‹è¯•è¦†ç›–æ ¸å¿ƒæµç¨‹
- [ ] E2E æµ‹è¯•è¦†ç›–ä¸»è¦åœºæ™¯
- [ ] è¦†ç›–ç‡æ£€æŸ¥å·²é…ç½®
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

### ä»»åŠ¡ 4.3ï¼šCI/CD ä¼˜åŒ– â±ï¸ 6å°æ—¶ | P3
**è´Ÿè´£äºº**: DevOps

```bash
# 1. ä¼˜åŒ– CI é…ç½®
# ä¿®æ”¹ .github/workflows/ci.yml
# - æ·»åŠ  lint job
# - æ·»åŠ  security job
# - ä¼˜åŒ– test job
# - æ·»åŠ  build job

# 2. æ·»åŠ  CD é…ç½®
touch .github/workflows/cd.yml
# - æ·»åŠ  Docker æ„å»º
# - æ·»åŠ è‡ªåŠ¨éƒ¨ç½²

# 3. æµ‹è¯• CI/CD
# æäº¤ä»£ç è§¦å‘ CI
# åˆå¹¶åˆ° main è§¦å‘ CD
```

**æ£€æŸ¥æ¸…å•**:
- [ ] CI åŒ…å« lintã€testã€securityã€build
- [ ] CD åŒ…å« Docker æ„å»ºå’Œéƒ¨ç½²
- [ ] æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šè‡ªåŠ¨ä¸Šä¼ 
- [ ] CI/CD æµç¨‹æµ‹è¯•é€šè¿‡

---

### ä»»åŠ¡ 4.4ï¼šç¯å¢ƒå˜é‡ç®¡ç† â±ï¸ 3å°æ—¶ | P3
**è´Ÿè´£äºº**: åç«¯å¼€å‘

```bash
# 1. åˆ›å»ºç¯å¢ƒå˜é‡ç¤ºä¾‹
touch .env.example

# 2. åˆ›å»ºç¯å¢ƒå˜é‡åŠ è½½å·¥å…·
# å·²åœ¨ä»»åŠ¡ 2.5 åˆ›å»º server/config/env.js

# 3. åˆ›å»ºå¯†é’¥ç”Ÿæˆè„šæœ¬
mkdir scripts
touch scripts/generate-secrets.js

# 4. æ›´æ–°æ–‡æ¡£
# ä¿®æ”¹ docs/ENVIRONMENT_VARIABLES.md
```

**æ£€æŸ¥æ¸…å•**:
- [ ] .env.example å·²åˆ›å»º
- [ ] env.js å·²åˆ›å»ºå¹¶éªŒè¯å¿…éœ€å˜é‡
- [ ] generate-secrets.js å·²åˆ›å»º
- [ ] ç¯å¢ƒå˜é‡æ–‡æ¡£å·²æ›´æ–°
- [ ] æ‰€æœ‰é…ç½®ä»ç¯å¢ƒå˜é‡è¯»å–

---

### ä»»åŠ¡ 4.5ï¼šDocker ä¼˜åŒ– â±ï¸ 4å°æ—¶ | P3
**è´Ÿè´£äºº**: DevOps

```bash
# 1. å‡çº§ Node.js ç‰ˆæœ¬
# ä¿®æ”¹ Dockerfile.backend å’Œ Dockerfile.frontend
# node:16-alpine â†’ node:18-alpine

# 2. æ·»åŠ  .dockerignore
touch .dockerignore

# 3. ä¼˜åŒ– Dockerfile
# - ä½¿ç”¨å¤šé˜¶æ®µæ„å»º
# - å‡å°é•œåƒä½“ç§¯

# 4. æµ‹è¯• Docker éƒ¨ç½²
docker-compose build
docker-compose up -d
```

**æ£€æŸ¥æ¸…å•**:
- [ ] Node.js ç‰ˆæœ¬å·²å‡çº§åˆ° 18
- [ ] .dockerignore å·²åˆ›å»º
- [ ] Dockerfile å·²ä¼˜åŒ–
- [ ] Docker é•œåƒä½“ç§¯å‡å° > 20%
- [ ] Docker éƒ¨ç½²æµ‹è¯•é€šè¿‡

---

### âœ… ç¬¬å››é˜¶æ®µéªŒæ”¶æ ‡å‡†
- [ ] ä»£ç è§„èŒƒç»Ÿä¸€ï¼ˆESLint + Prettierï¼‰
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] CI/CD æµç¨‹å®Œå–„
- [ ] ç¯å¢ƒå˜é‡è§„èŒƒç®¡ç†
- [ ] Docker é…ç½®ä¼˜åŒ–

---

## ğŸ“š ç¬¬äº”é˜¶æ®µï¼šæ–‡æ¡£å’ŒåŸ¹è®­ï¼ˆ1-2å¤©ï¼‰

### ä»»åŠ¡ 5.1ï¼šæŠ€æœ¯æ–‡æ¡£æ›´æ–° â±ï¸ 4å°æ—¶
**è´Ÿè´£äºº**: æŠ€æœ¯è´Ÿè´£äºº

```bash
# 1. æ›´æ–°æ¶æ„æ–‡æ¡£
touch docs/architecture.md

# 2. æ›´æ–° API æ–‡æ¡£
# ä¿®æ”¹ docs/api.md

# 3. æ›´æ–°éƒ¨ç½²æ–‡æ¡£
# ä¿®æ”¹ docs/deployment.md

# 4. æ›´æ–°å¼€å‘æŒ‡å—
touch docs/development-guide.md
```

**æ£€æŸ¥æ¸…å•**:
- [ ] æ¶æ„æ–‡æ¡£å·²æ›´æ–°
- [ ] API æ–‡æ¡£å·²æ›´æ–°
- [ ] éƒ¨ç½²æ–‡æ¡£å·²æ›´æ–°
- [ ] å¼€å‘æŒ‡å—å·²åˆ›å»º

---

### ä»»åŠ¡ 5.2ï¼šå›¢é˜ŸåŸ¹è®­ â±ï¸ 4å°æ—¶
**è´Ÿè´£äºº**: æŠ€æœ¯è´Ÿè´£äºº

**åŸ¹è®­å†…å®¹**:
1. æ–°æ¶æ„ä»‹ç»ï¼ˆ1å°æ—¶ï¼‰
2. å®‰å…¨è§„èŒƒåŸ¹è®­ï¼ˆ1å°æ—¶ï¼‰
3. ä»£ç è§„èŒƒåŸ¹è®­ï¼ˆ1å°æ—¶ï¼‰
4. æµ‹è¯•è§„èŒƒåŸ¹è®­ï¼ˆ1å°æ—¶ï¼‰

**æ£€æŸ¥æ¸…å•**:
- [ ] æ–°æ¶æ„åŸ¹è®­å®Œæˆ
- [ ] å®‰å…¨è§„èŒƒåŸ¹è®­å®Œæˆ
- [ ] ä»£ç è§„èŒƒåŸ¹è®­å®Œæˆ
- [ ] æµ‹è¯•è§„èŒƒåŸ¹è®­å®Œæˆ
- [ ] åŸ¹è®­ææ–™å·²å½’æ¡£

---

### âœ… ç¬¬äº”é˜¶æ®µéªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰æŠ€æœ¯æ–‡æ¡£å·²æ›´æ–°
- [ ] å›¢é˜ŸåŸ¹è®­å·²å®Œæˆ
- [ ] çŸ¥è¯†è½¬ç§»å·²å®Œæˆ

---

## ğŸ“Š æ€»ä½“è¿›åº¦è·Ÿè¸ª

### é‡Œç¨‹ç¢‘
- [ ] **é‡Œç¨‹ç¢‘ 1**: å®‰å…¨é—®é¢˜ä¿®å¤å®Œæˆï¼ˆç¬¬ 2 å¤©ï¼‰
- [ ] **é‡Œç¨‹ç¢‘ 2**: æ¶æ„é‡æ„å®Œæˆï¼ˆç¬¬ 9 å¤©ï¼‰
- [ ] **é‡Œç¨‹ç¢‘ 3**: å‰ç«¯ä¼˜åŒ–å®Œæˆï¼ˆç¬¬ 13 å¤©ï¼‰
- [ ] **é‡Œç¨‹ç¢‘ 4**: å·¥ç¨‹åŒ–å®Œå–„ï¼ˆç¬¬ 17 å¤©ï¼‰
- [ ] **é‡Œç¨‹ç¢‘ 5**: æ–‡æ¡£å’ŒåŸ¹è®­å®Œæˆï¼ˆç¬¬ 19 å¤©ï¼‰

### å…³é”®æŒ‡æ ‡
- [ ] å®‰å…¨æ¼æ´æ•°: 0
- [ ] ä»£ç è¦†ç›–ç‡: > 80%
- [ ] é¦–å±åŠ è½½æ—¶é—´: å‡å°‘ 30%
- [ ] API å“åº”æ—¶é—´: < 200ms
- [ ] æ•°æ®åº“æŸ¥è¯¢æ—¶é—´: < 50ms

---

## âš ï¸ é£é™©æç¤º

### é«˜é£é™©é¡¹
1. **æ•°æ®è¿ç§»å¤±è´¥** - åŠ¡å¿…å¤‡ä»½æ•°æ®åº“
2. **é‡æ„å¼•å…¥æ–° Bug** - å…ˆå†™æµ‹è¯•å†é‡æ„
3. **å½±å“çº¿ä¸ŠæœåŠ¡** - åœ¨éé«˜å³°æœŸéƒ¨ç½²

### åº”å¯¹æªæ–½
- æ¯ä¸ªé˜¶æ®µå®Œæˆåè¿›è¡Œå…¨é¢æµ‹è¯•
- ä¿ç•™æ—§ä»£ç ä½œä¸ºå¤‡ä»½
- å‡†å¤‡å¿«é€Ÿå›æ»šæ–¹æ¡ˆ
- ç°åº¦å‘å¸ƒï¼Œé€æ­¥åˆ‡é‡

---

## ğŸ“ è”ç³»æ–¹å¼

- **æŠ€æœ¯è´Ÿè´£äºº**: [å§“å] - [é‚®ç®±]
- **é¡¹ç›®ç»ç†**: [å§“å] - [é‚®ç®±]
- **ç´§æ€¥è”ç³»**: [ç”µè¯]

---

## ğŸ“ æ¯æ—¥ç«™ä¼šæ¨¡æ¿

```
æ˜¨å¤©å®Œæˆï¼š
- [ ] ä»»åŠ¡ 1
- [ ] ä»»åŠ¡ 2

ä»Šå¤©è®¡åˆ’ï¼š
- [ ] ä»»åŠ¡ 3
- [ ] ä»»åŠ¡ 4

é‡åˆ°çš„é—®é¢˜ï¼š
- é—®é¢˜ 1
- é—®é¢˜ 2

éœ€è¦çš„æ”¯æŒï¼š
- æ”¯æŒ 1
- æ”¯æŒ 2
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-12-19  
**ä¸‹æ¬¡æ›´æ–°**: æ¯æ—¥æ›´æ–°è¿›åº¦

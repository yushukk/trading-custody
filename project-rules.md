# 项目规则 (Project Rules)

## 1. 代码规范

### 1.1 命名规范
- 变量和函数使用驼峰命名法 (camelCase)
- 类名使用帕斯卡命名法 (PascalCase)
- 常量使用大写字母加下划线命名 (UPPER_CASE)
- 组件文件使用 PascalCase 命名，如 `UserDashboard.jsx`

### 1.2 JavaScript/React 规范
- 使用函数组件和 Hooks，避免使用类组件
- 组件文件扩展名使用 .jsx
- 组件内部函数使用箭头函数定义
- 使用 PropTypes 或 TypeScript 定义 props 类型（当前项目使用 PropTypes）
- CSS 类名使用 kebab-case 格式

### 1.3 后端规范
- API 路由统一使用 `/api` 前缀
- 数据库操作使用 SQLite3
- 错误处理必须包含适当日志记录
- 所有 API 响应格式应统一

## 2. Git 提交规范

### 2.1 提交类型
- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档更新
- `style`: 代码格式调整（不影响代码运行）
- `refactor`: 重构代码
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

### 2.2 提交格式
```
<type>(<scope>): <subject>

<body>

<footer>
```

示例:
```
feat(user): 添加用户登录功能

实现用户登录界面和后端验证逻辑

Closes #123
```

## 3. 项目结构规范

### 3.1 前端结构
```
src/
├── components/          # React 组件
├── App.jsx             # 主应用组件
└── index.js            # 入口文件
```

### 3.2 后端结构
```
server/
├── config.js           # 配置文件
├── server.js           # 主服务文件
└── database.db         # 数据库文件
```

## 4. 安全规范

### 4.1 认证授权
- 使用 JWT 进行用户身份验证
- 敏感操作需要验证用户权限
- 密码应加密存储（当前项目为简化实现，实际存储为明文）

### 4.2 数据安全
- 所有 API 请求应进行参数验证
- 防止 SQL 注入攻击，使用参数化查询
- 敏感信息不应在日志中明文输出

## 5. 性能规范

### 5.1 前端性能
- 组件应合理使用 React.memo 优化渲染
- 避免在渲染函数中进行复杂计算
- 合理使用 useCallback 和 useMemo

### 5.2 后端性能
- 数据库查询应添加适当索引
- 避免 N+1 查询问题
- 合理使用缓存机制

## 6. 测试规范

### 6.1 单元测试
- 关键业务逻辑应有单元测试覆盖
- 使用 Jest 作为测试框架

### 6.2 集成测试
- API 接口应有集成测试
- 前后端交互功能应进行端到端测试

## 7. 部署规范

### 7.1 环境配置
- 使用环境变量管理不同环境的配置
- 敏感信息不应硬编码在代码中

### 7.2 部署流程
- 前端构建使用 `npm run build`
- 后端使用 `npm start` 启动服务
- 部署脚本应可重复执行且幂等

## 8. 移动端适配规范

### 8.1 设计原则
- 移动优先：所有设计和开发都优先考虑移动设备体验
- 响应式布局：确保在各种尺寸的移动设备上都能正常显示
- 触控友好：所有交互元素应适合手指触控操作

### 8.2 UI组件规范
- 使用 Ant Design Mobile 组件库
- 按钮、输入框等交互元素大小应适合手指操作（最小44px）
- 避免水平滚动，内容应自适应屏幕宽度

### 8.3 布局规范
- 使用弹性布局（Flexbox）进行页面布局
- 采用相对单位（如 rem、em、%）而非固定像素
- 重要内容放在屏幕上方，减少用户滚动操作

### 8.4 性能优化
- 图片资源应进行适当压缩和适配
- 减少 HTTP 请求次数，合理合并资源
- 避免使用过大的字体和图片，影响加载速度

### 8.5 测试要求
- 在不同尺寸的移动设备上进行测试
- 确保在 iOS 和 Android 系统上的兼容性
- 测试不同浏览器（如 Safari、Chrome）的兼容性